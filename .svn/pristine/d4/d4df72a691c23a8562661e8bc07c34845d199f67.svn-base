<?php
/* @var $this \yii\web\View */
use common\helpers\Html;
use common\helpers\String;
use common\models\User;

?>
	<script type="application/javascript">
		var App = {};
		var Helper = {
			html : {},
			string : {}
		};
		Helper.html.sizesAvatar= <?= \yii\helpers\Json::encode(User::$sizesAvatar)?>;
		Helper.html.colorsAvatar = <?= \yii\helpers\Json::encode(Html::$colorsAvatar)?>;
		Helper.string.chars = <?= \yii\helpers\Json::encode(String::$chars)?>;
		App.homeUrl = "<?= Yii::$app->getHomeUrl()?>";
	</script>
<?php
/* @var $content string */
$this->beginContent('@frontend/views/layouts/common.php');
?>
	<div class="wrap">
		<?php
		\yii\bootstrap\NavBar::begin([
			'innerContainerOptions' => ['class' => 'container'],
			'brandLabel'            => 'Findspree',
			'brandUrl'              => Yii::$app->homeUrl,
			'options'               => [
				'class' => 'navbar navbar-inverse navbar-fixed-top',
			],
		]);
//		$menuItems[] = ['label' => 'О сервисе', 'url' => '#','options'=>['data-toggle'=>'modal','data-target'=>'#tutorial']];
		$menuItems[] = ['label' => 'Обратная связь', 'url' => ['/site/feedback']];
		$menuItems[] = ['label' => 'Карта', 'url' => ['/event/map']];
		$menuItems[] = ['label' => 'События', 'url' => ['/site/index']];
		$menuItems[] = ['label' => 'Добавить событие', 'url' => ['/event/new']];
		?>

		<?php if (Yii::$app->user->isGuest) {
			$menuItems[] = ['label' => 'Регистрация', 'url' => ['/site/signup']];
			$menuItems[] = ['label' => 'Вход', 'url' => ['/site/login']];
		}else {
			$menuItems[] = [
				'label'       => Html::avatar(Yii::$app->user->identity, 50, ['class' => 'img-circle hidden-xs']) . ' ' . \yii\helpers\Html::tag('span', Yii::$app->user->identity->username, ['class' => 'username']),
				'encode'      => false,
				'options'     => ['class' => 'user-main-avatar'],
				'linkOptions' => ['id' => 'user-main-link'],
				'items'       => [
					['label' => 'Профиль', 'url' => ['/user/index']],
					'<li role="presentation" class="divider"></li>',
					['label' => 'Выход', 'url' => ['/site/logout']],
				]
				//                'linkOptions' => ['data-toggle' => 'modal']
			];
		}
		echo \yii\bootstrap\Nav::widget([
			'activateParents' => true,
			'options'         => ['class' => 'navbar-nav navbar-right'],
			'items'           => $menuItems,
		]);
		\yii\bootstrap\NavBar::end(); ?>
		<div class="container page">
			<?= $content; ?>
		</div>
	</div>
<?php $this->endContent() ?>
